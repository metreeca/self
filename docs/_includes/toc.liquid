{% comment %}

	Generate a TOC for a HTML document

	Usage:

		{% include toc.liquid html=content %}

	Parameters:

		* html (string) - the HTML of compiled markdown generated by kramdown in Jekyll

	Output:

		HTML headers with links to corresponding headers ids in <html>

{% endcomment %}

{% assign nodes = include.html | split: '<h' %}

{% for node in nodes %}

	{% assign level = node | slice: 0, 1 %}

	{% if "123456" contains level %}

		{% assign _id = node | split: '"' %}
		{% assign id = _id[1] %}

		{% assign _text = _id[2] | split: '</h' %}
		{% assign text = _text[0] | slice: 1, _text[0].size | strip_html %}

		<h{{ level }}>
			<a href="#{{ id }}">{{ text }}</a>
		</h{{ level }}>

	{% endif %}

{% endfor %}
